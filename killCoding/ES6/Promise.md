# 从promise开始解决回调地狱

1. 在业务中，会请求大量的数据，有时候为了保护自身系统业务的安全，必然需要一些权限，比如必须在拥有一个标识或者身份认证后才有权限获得资源进行下一次的请求，这样我们只有把下一次请求放入Ajax的回调函数中，如果多产生几次认证，就会形成无限的回调，最后通过代码缩略图就可以看见代码呈方向向右的三角形，当你凝视这个三角空洞时，是否发现这代码还挺有形的，除了写起来费劲，看起来费劲，维护起来费劲等等外，也没什么。。。

## promise 是什么

1. promise是ES6提出的一套模型，在MDN上是这样描述的

> Promise 对象是一个代理对象（代理一个值），被代理的值在Promise对象创建时可能是未知的。它允许你为异步操作的成功和失败分别绑定相应的处理方法（handlers）。 这让异步方法可以像同步方法那样返回值，但并不是立即返回最终执行结果，而是一个能代表未来出现的结果的promise对象

我理解为，promise是一个模型，它有三个状态分别为Pending，resolved，rejected,当状态为Pengding是该对象是处于未决的状态下，就是没有值，仅仅是产生了这样一个对象。它存在两个方法resolve和reject，这两个方法可以改变该对象的状态，它的参数才作为该对象的值，值得注意的是，一旦状态发生更改了，就不能在发生变化了，因此它的状态是不可逆的。经过resolve或者reject后该对象的状态变为已决，如果是resolve则是成功，reject则是失败，同样只得注意的是**这里的成功和失败并不是指你的结果，而是代码层面上，只有在代码运行过程中报错了和你自己抛出一个错误，或者你手动调用reject才会是rejected状态**。代码执行到这儿就该执行你想要做的事了,通过then或者catch添加任务。


